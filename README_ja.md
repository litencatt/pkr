# Poker CLI

[![CI](https://github.com/litencatt/pkr/actions/workflows/ci.yml/badge.svg)](https://github.com/litencatt/pkr/actions/workflows/ci.yml)

Go 言語で実装されたコマンドライン版ポーカーゲームです。

## 機能

- インタラクティブなポーカーゲーム
- 複数ラウンドのプレイ
- スコアとマルチプライヤーシステム
- カードの選択とアクション（Play/Discard/Cancel）

## 遊び方

### ゲーム起動

```bash
# 通常モード
./pkr run

# デバッグモード（カードの詳細情報を表示）
./pkr run -d
```

### ゲームフロー

1. **ゲーム開始**: ゲームが開始されると 5 枚のカードが配られます
2. **カード選択**: 配られたカードを確認し、どのカードをプレイするか選択します
3. **アクション選択**: 各カードに対して以下のアクションから選択できます：

   - **Play**: カードをプレイしてポーカーハンドとして評価する
   - **Discard**: カードを捨てる（スコアに影響しない）
   - **Cancel**: 選択をキャンセルする

4. **ハンド評価**: プレイしたカードがポーカーハンドとして評価され、スコアが加算されます
5. **次のラウンド**: ラウンドが終了すると次のラウンドに進みます

### ポーカーハンド

以下のポーカーハンドが認識されます（強い順）：

- **ロイヤルフラッシュ**: 同じスートの A-K-Q-J-10
- **ストレートフラッシュ**: 同じスートの連続する 5 枚
- **フォーカード**: 同じランクのカード 4 枚
- **フルハウス**: 3 枚組と 2 枚組の組み合わせ
- **フラッシュ**: 同じスートの 5 枚
- **ストレート**: 連続する 5 枚（スート不問）
- **スリーカード**: 同じランクのカード 3 枚
- **ツーペア**: 2 枚組が 2 つ
- **ワンペア**: 同じランクのカード 2 枚
- **ハイカード**: 上記以外

### スコアリング

- 各ポーカーハンドには固有のスコアが設定されています
- より強いハンドほど高いスコアが得られます
- マルチプライヤーシステムにより、連続してハンドを作ることでボーナススコアが獲得できます

### ゲーム終了

- 設定されたラウンド数をプレイするか、手動でゲームを終了することができます
- 最終スコアが表示されてゲーム終了となります

## 開発環境

本プロジェクトは Docker Compose を使用した開発環境をサポートしています。

### 必要なソフトウェア

- Docker
- Docker Compose
- Make

### セットアップ

```bash
# 開発環境の起動
docker compose up -d

# アプリケーションのビルド
docker compose exec app make build

# テストの実行
docker compose exec app go test ./...

# リンターの実行
docker compose exec app golangci-lint run

# アプリケーションの実行
docker compose exec app ./pkr
```

## CI/CD

GitHub Actions を使用して以下の自動化を行っています：

- **テスト**: 単体テストの実行とカバレッジ測定
- **リント**: golangci-lint によるコード品質チェック
- **セキュリティスキャン**: gosec による脆弱性検査
- **ビルド**: アプリケーションのビルド検証

## プロジェクト構成

```
.
├── cmd/pkr/          # メインアプリケーション
├── entity/           # ドメインエンティティ
├── service/          # ビジネスロジック
├── .github/workflows/ # CI/CD設定
├── docker-compose.yml # 開発環境設定
└── Makefile         # ビルドタスク
```

## ライセンス

MIT License
